% Copyright© KORO
%%plot file for Java Socket Programming
format compact;
clear;
close all;
clc;
dir='\Plots\';
mkdir(dir);

%%Echo with delay G1-------------------------------------------------------
ba=fopen("E4015_DELAY.txt");
b=fscanf(ba,'%f');
fclose(ba);
bn=length(b);
t=1:bn;
bavg=zeros(1,bn);
bavg(:)=sum(b)/bn;
figure();
plot(t,b);
hold on;
plot(t,bavg);
title("G1");
xlabel(sprintf('No. of packets = %i',bn));
ylabel('Packet Response Time (ms)');
legend("Time to receive packet",sprintf('Average Delay = %.2f ms',bavg(1)));
saveas(gcf,fullfile('Plots','G1.png'));

clear;

%%Echo with delay G2 8sec ------------------------------------------------
ba=fopen("E4015_DELAY.txt");
b=fscanf(ba,'%f');
fclose(ba);
bn=length(b);
y=[];
ms=0;
nop=0;
for i=1:bn
    ms=ms+b(i);
    nop=nop+1;
    if ms>8000
        y1=nop/8;
        y=[y y1];
        nop=0;
        ms=0;
    end
end
figure();
plot(1:length(y),y);
title("G2");
ylabel('Throughput Average for 8 seconds');
saveas(gcf,fullfile('Plots','G2.png'));

clear;

%%Echo without delay G3-------------------------------------------------
ba=fopen("E4015_NO_DELAY.txt");
b=fscanf(ba,'%f');
fclose(ba);
bn=length(b);
t=1:bn;
bavg=zeros(1,bn);
bavg(:)=sum(b)/bn;
figure();
plot(t,b);
hold on;
plot(t,bavg);
title("G3");
axis([0 bn min(b)-50 max(b)+50]);
xlabel(sprintf('No. of packets = %i',bn));
ylabel('Packet Response Time (ms)');
legend("Time to receive packet",sprintf('Average Delay = %.2f ms',bavg(1)));
saveas(gcf,fullfile('Plots','G3.png'));

clear;

%%Echo without delay G4 8sec ----------------------------------------------
ba=fopen("E4015_NO_DELAY.txt");
b=fscanf(ba,'%f');
fclose(ba);
bn=length(b);
y=[];
ms=0;
nop=0;
for i=1:bn
    ms=ms+b(i);
    nop=nop+1;
    if ms>8000
        y1=nop/8;
        y=[y y1];
        nop=0;
        ms=0;
    end
end
figure();
plot(1:length(y),y);
title("G4");
ylabel('Throughput Average for 8 seconds');
saveas(gcf,fullfile('Plots','G4.png'));

clear;

%%Echo with delay G5 histogram ------------------------------------------
ba=fopen("E4015_DELAY.txt");
b=fscanf(ba,'%f');
fclose(ba);
bn=length(b);
%t=1:bn;
%bavg=zeros(1,bn);
%bavg(:)=sum(b)/bn;
mt=sum(b)/bn;
disp("mt");
disp(mt);
for i=1:bn
    c(i)=b(i)*b(i);
end
cmt=sum(c)/bn;
dmt=mt*mt;
d=cmt-dmt;
disp("d");
disp(d);
figure();
histogram(b);
title("G5");
xlabel('Packet Response Time (ms)');
ylabel(sprintf('No. of packets '));
saveas(gcf,fullfile('Plots','G5.png'));

clear;

%%Echo with delay G6 histogram 8 sec -------------------------------------
ba=fopen("E4015_DELAY.txt");
b=fscanf(ba,'%f');
fclose(ba);
bn=length(b);
y=[];
ms=0;
nop=0;
for i=1:bn
    ms=ms+b(i);
    nop=nop+1;
    if ms>8000
        y1=nop/8;
        y=[y y1];
        nop=0;
        ms=0;
    end
end
figure();
histogram(y,4);
title("G6");
%axis([0 bn min(b)-50 max(b)+50]);
xlabel('Packet Response Time (ms)');
ylabel(sprintf('No. of packets '));
saveas(gcf,fullfile('Plots','G6.png'));

clear;

%%Echo with delay G7 histogram --------------------------------------------
ba=fopen("E4015_NO_DELAY.txt");
b=fscanf(ba,'%f');
fclose(ba);
%bn=length(b);
%t=1:bn;
%bavg=zeros(1,bn);
%bavg(:)=sum(b)/bn;
figure();
histogram(b);
title("G7");
%axis([0 bn min(b)-50 max(b)+50]);
xlabel('Packet Response Time (ms)');
ylabel(sprintf('No. of packets '));
saveas(gcf,fullfile('Plots','G7.png'));

clear;

%%Echo without delay G8 histogram 8 sec------------------------------------
ba=fopen("E4015_NO_DELAY.txt");
b=fscanf(ba,'%f');
fclose(ba);
bn=length(b);
y=[];
ms=0;
nop=0;
for i=1:bn
    ms=ms+b(i);
    nop=nop+1;
    if ms>8000
        y1=nop/8;
        y=[y y1];
        nop=0;
        ms=0;
    end
end
figure();
histogram(y,8);
%axis([4 4.5 0 length(b)]);
title("G8");
%axis([4 bn min(b)-50 max(b)+50]);
xlabel('Packet Response Time (ms)');
ylabel(sprintf('No. of packets '));
saveas(gcf,fullfile('Plots','G8.png'));

clear;

%%Echo without delay R1 histogram 8 sec
ba=fopen("E4015_DELAY.txt");
b=fscanf(ba,'%f');
fclose(ba);
bn=length(b);
t=1:bn;
%bavg=zeros(1,bn);
%bavg(:)=sum(b)/bn;
a=0.8;
bt=0.9;
c=3;
srtt=zeros(1,bn);
srtt(1)=(1-a)*b(1);
for i=2:bn 
    srtt(i)=a*srtt(i-1)+(1-a)*b(i);
end
sigma=zeros(1,bn);
sigma(1)=(1-bt)*abs(srtt(1)-b(1));
for i=2:bn
    sigma(i)=bt*sigma(i-1)+(1-bt)*abs(srtt(i)-b(i));
end
rto=zeros(1,bn);   
for i=1:bn
    rto(i)=srtt(i)+c*sigma(i);
end
figure();
plot(t,b);
hold on;
plot(t,srtt);
hold on;
plot(t,sigma);
hold on;
plot(t,rto);
hold on;
title("R1");
legend("RTT","SRTT","σrtt","RΤΟ");
%axis([4 bn min(b)-50 max(b)+50]);
saveas(gcf,fullfile('Plots','R1.png'));

clear;

%%DPCM freq generator G9---------------------------------------------------
ba=fopen("generator_DPCM_Samples");
b=fscanf(ba,'%f');
fclose(ba);
bn=length(b);
t=1:bn;
%bavg=zeros(1,bn);
%bavg(:)=sum(b)/bn;
figure();
plot(t,b);
xlim([0 2000]);
title("G9");
%axis([4 bn min(b)-50 max(b)+50]);
%xlabel('Packet Response Time (ms)');
%ylabel(sprintf('No. of packets '));
saveas(gcf,fullfile('Plots','G9.png'));

clear;

%%DPCM Waveform part of song 1 G10----------------------------------------
ba=fopen("song1_DPCM_Samples");
b=fscanf(ba,'%f');
fclose(ba);
bn=length(b);
t=1:bn;
%bavg=zeros(1,bn);
%bavg(:)=sum(b)/bn;
figure();
plot(t,b);
xlim([0 2000]);
title("G10");
%axis([4 bn min(b)-50 max(b)+50]);
%xlabel('Packet Response Time (ms)');
%ylabel(sprintf('No. of packets '));
saveas(gcf,fullfile('Plots','G10.png'));

clear;

%%DPCM sub song G11 ---------------------------------------------------
ba=fopen("song1_DPCM_Subs");
b=fscanf(ba,'%f');
fclose(ba);
%bn=length(b);
%t=1:bn;
%bavg=zeros(1,bn);
%bavg(:)=sum(b)/bn;
figure();
histogram(b);
%axis([0 2000 -150 150]);
title("G11");
%axis([4 bn min(b)-50 max(b)+50]);
%xlabel('Packet Response Time (ms)');
%ylabel(sprintf('No. of packets '));
saveas(gcf,fullfile('Plots','G11.png'));

clear;

%%DPCM sub freq G12 -----------------------------------------------------
ba=fopen("song1_AQ-DPCM_Subs");
b=fscanf(ba,'%f');
fclose(ba);
%bn=length(b);
%t=1:bn;
%bavg=zeros(1,bn);
%bavg(:)=sum(b)/bn;
figure();
histogram(b);
title("G12");
%axis([4 bn min(b)-50 max(b)+50]);
%xlabel('Packet Response Time (ms)');
%ylabel(sprintf('No. of packets '));
saveas(gcf,fullfile('Plots','G12.png'));

clear;

%%DPCM sub song G13 ------------------------------------------------------
ba=fopen("song1_DPCM_Samples");
b=fscanf(ba,'%f');
fclose(ba);
%bn=length(b);
%t=1:bn;
%bavg=zeros(1,bn);
%bavg(:)=sum(b)/bn;
figure();
histogram(b);
%axis([0 2000 -150 150]);
title("G13");
%axis([4 bn min(b)-50 max(b)+50]);
%xlabel('Packet Response Time (ms)');
%ylabel(sprintf('No. of packets '));
saveas(gcf,fullfile('Plots','G13.png'));

clear;

%%DPCM sub song G14-------------------------------------------------------
ba=fopen("song1_AQ-DPCM_Samples");
b=fscanf(ba,'%f');
fclose(ba);
%bn=length(b);
%t=1:bn;
%bavg=zeros(1,bn);
%bavg(:)=sum(b)/bn;
figure();
histogram(b);
%axis([0 2000 -150 150]);
title("G14");
%axis([4 bn min(b)-50 max(b)+50]);
%xlabel('Packet Response Time (ms)');
%ylabel(sprintf('No. of packets '));
saveas(gcf,fullfile('Plots','G14.png'));

clear;

%%DPCM sub song G15-------------------------------------------------------
ba=fopen("song1_AQ-DPCM_M");
b=fscanf(ba,'%f');
fclose(ba);
bn=length(b);
t=1:bn;
%bavg=zeros(1,bn);
%bavg(:)=sum(b)/bn;
figure();
plot(t,b);
xlim([0 300]);
title("G15");
%axis([4 bn min(b)-50 max(b)+50]);
%xlabel('Packet Response Time (ms)');
%ylabel(sprintf('No. of packets '));
saveas(gcf,fullfile('Plots','G15.png'));

clear;

clear;

%%DPCM sub song G16--------------------------------------------------------
ba=fopen("song1_AQ-DPCM_B");
b=fscanf(ba,'%f');
fclose(ba);
bn=length(b);
t=1:bn;
%bavg=zeros(1,bn);
%bavg(:)=sum(b)/bn;
figure();
plot(t,b);
%axis([0 2000 -150 150]);
title("G16");
%axis([4 bn min(b)-50 max(b)+50]);
%xlabel('Packet Response Time (ms)');
%ylabel(sprintf('No. of packets '));
saveas(gcf,fullfile('Plots','G16.png'));

clear;

%%DPCM sub song G17-------------------------------------------------------
ba=fopen("song2_AQ-DPCM_M");
b=fscanf(ba,'%f');
fclose(ba);
bn=length(b);
t=1:bn;
%bavg=zeros(1,bn);
%bavg(:)=sum(b)/bn;
figure();
plot(t,b);
%axis([0 2000 -150 150]);
title("G17");
%axis([4 bn min(b)-50 max(b)+50]);
%xlabel('Packet Response Time (ms)');
%ylabel(sprintf('No. of packets '));
saveas(gcf,fullfile('Plots','G17.png'));

clear;

%%DPCM sub song G18-------------------------------------------------------
ba=fopen("song2_AQ-DPCM_B");
b=fscanf(ba,'%f');
fclose(ba);
bn=length(b);
t=1:bn;
%bavg=zeros(1,bn);
%bavg(:)=sum(b)/bn;
figure();
plot(t,b);
%axis([0 2000 -150 150]);
title("G18");
%axis([4 bn min(b)-50 max(b)+50]);
%xlabel('Packet Response Time (ms)');
%ylabel(sprintf('No. of packets '));
saveas(gcf,fullfile('Plots','G18.png'));

%%DPCM sub song G19-G20-------------------------------------------------------
fileName1 = 'ITHAKICOPTER.json'; % filename in JSON extension
fid1 = fopen(fileName1); % Opening the file
raw1 = fread(fid1,inf); % Reading the contents
str1 = char(raw1'); % Transformation
fclose(fid1); % Closing the file
data1 = jsondecode(str1);
lmotor=[0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;158;156;154;152;150;148;146;144;142;140;138;136;134;132;130;109;69;29;0;0;0;0;0;0;0;180;180;180]';
rmotor=[0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;160;158;156;154;152;150;148;146;144;142;140;138;136;134;132;130;109;69;29;0;0;0;0;0;0;0;180;180;180]';
altitude1 =[72;72;72;72;72;72;72;72;72;72;72;72;72;72;72;72;72;72;72;72;72;72;72;72;72;72;72;74;74;74;73;74;74;74;74;74;74;74;73;74;74;74;74;74;74;74;73;74;74;74;74;73;74;73;73;73;73;73;73;73;73;73;74;74;73;73;73;73;72;72;72;72;72;72;72;72;72;72;85;110]';
temperature=[24.1600000000000;24.1600000000000;24.1600000000000;24.1600000000000;24.1600000000000;24.1700000000000;24.1700000000000;24.1600000000000;24.1600000000000;24.1600000000000;24.1600000000000;24.1600000000000;24.1600000000000;24.1600000000000;24.1600000000000;24.1600000000000;24.1600000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1800000000000;24.1800000000000;24.1600000000000;24.1600000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1600000000000;24.1600000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1300000000000;24.1300000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1400000000000;24.1600000000000;24.1600000000000;24.1400000000000;24.1400000000000;24.1600000000000;24.1600000000000;24.1600000000000;24.1600000000000;24.1600000000000;24.1600000000000;24.1600000000000;24.1600000000000;24.1400000000000;24.1400000000000;24.1800000000000;24.1800000000000;24.1700000000000;24.1700000000000;24.1900000000000]';
pressure=[1010.58000000000;1010.58000000000;1010.58000000000;1010.53000000000;1010.53000000000;1010.55000000000;1010.55000000000;1010.58000000000;1010.58000000000;1010.53000000000;1010.53000000000;1010.58000000000;1010.58000000000;1010.48000000000;1010.48000000000;1010.55000000000;1010.55000000000;1010.54000000000;1010.54000000000;1010.51000000000;1010.51000000000;1010.57000000000;1010.57000000000;1010.44000000000;1010.44000000000;1010.52000000000;1010.52000000000;1010.50000000000;1010.50000000000;1010.47000000000;1010.47000000000;1010.49000000000;1010.49000000000;1010.46000000000;1010.46000000000;1010.47000000000;1010.47000000000;1010.49000000000;1010.49000000000;1010.46000000000;1010.46000000000;1010.52000000000;1010.52000000000;1010.54000000000;1010.54000000000;1010.57000000000;1010.57000000000;1010.57000000000;1010.57000000000;1010.46000000000;1010.46000000000;1010.57000000000;1010.57000000000;1010.56000000000;1010.56000000000;1010.55000000000;1010.55000000000;1010.55000000000;1010.55000000000;1010.55000000000;1010.55000000000;1010.62000000000;1010.62000000000;1010.58000000000;1010.58000000000;1010.56000000000;1010.56000000000;1010.61000000000;1010.61000000000;1010.60000000000;1010.60000000000;1010.58000000000;1010.58000000000;1010.64000000000;1010.64000000000;1010.62000000000;1010.62000000000;1010.59000000000;1010.59000000000;1010.65000000000]/50';
bn=length(altitude1);
t=1:bn;
%bavg=zeros(1,bn);
%bavg(:)=sum(b)/bn;
figure();
plot(t,lmotor);
hold on;
plot(t,rmotor);
hold on;
plot(t,altitude1);
hold on;
plot(t,temperature);
hold on;
plot(t,pressure);
legend("Lmotor","Rmotor","Altitude","Temperature","Pressure");
%axis([0 2000 -150 150]);
title("G19-G20");
%axis([4 bn min(b)-50 max(b)+50]);
%xlabel('Packet Response Time (ms)');
%ylabel(sprintf('No. of packets '));
saveas(gcf,fullfile('Plots','G1-G20.png'));

%%DPCM sub song G21-------------------------------------------------------
fileName = 'VV0103.json'; % filename in JSON extension
fid = fopen(fileName); % Opening the file
raw = fread(fid,inf); % Reading the contents
str = char(raw'); % Transformation
fclose(fid); % Closing the file
data = jsondecode(str);
ert=[0;0;0;0;0;0;0;0;0;0;1305;1132;1112;1110;1107;1129;1134;1134;1107;1115;1115;1116;1123;1127;1124;1105;1122;1125;1115;1130;1122;1128;1602;1044;1370;1110;1207;1222;1213;1099;1121;1337;1249;1417;1825;1216;1101;1084;1087;1280;1082;1267;1425;1629;1892;1250;1278;1303;1275;1107;1064;1054;1058;1045;1071;1050;1035;1042;1023;1032;1018;1019;1018;1019;1010;994;1003;2133;1536;1968;1214;1248;1514;1876;1170;1435;1615;1831;2045;1549;1589;1663;1719;1782;1834;1888;1925;1970;2013;2046;1586;1579;1577;1570;1567;1573;1580;1580;1600;1613;1607;1588;1604;1626;1668;1661;1625;1587;1573;1570;1566;1557;1555;1563;1567;1563;1559;1515;1486;1474;1471;1474;1465;1468;1463;1376;1320;1307;904;856;841;829;1119;1342;1532;1171;1249;1247;1129;849;1072;1177;1308;1425;1557;1685;1815;1470;1469;1455;1398;1366;1363;1417;1375;1265;1269;1245;1281;1329;1378;1428;1475;1532;1573;1609;1632;1651;1642;1628;1607;1593;1584;1577;1543;1510;1478;1455;1421;1389;1212;1188;999;818;764;754;764;924;851;754;736;748;735;873;1339;2033;1428;1244;1646;2024;1035;1426;889;745;745;744;748;1406;1212;995;751;739;747;727;754;767;741;702;2162;973;1108;1212;1257;756;750;723;200;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;939;879;773;766;740;739;768;755;1414;884;1106;872;1338;1402;1034;1335;992;785;747;761;968;1450;1804;1023;1279;1338;1404;1439;1423;1371;1323;1421;1519;1126;1098;1111;1131;1162;1147;858;754;728;748;980;1394;1279;1211;1357;798;741;729]';
iat=[12;12;12;12;12;12;12;12;12;12;11;11;11;12;12;12;12;12;12;12;12;12;12;12;12;12;12;13;13;13;13;13;13;13;13;13;13;13;13;13;13;13;13;14;13;13;13;13;13;14;14;14;14;14;14;14;14;14;14;13;13;13;13;13;13;14;14;13;14;13;13;14;14;13;14;14;13;14;14;14;14;14;14;14;14;14;14;14;14;14;13;14;14;14;14;14;14;14;13;13;13;13;13;14;13;14;14;13;13;13;13;13;14;14;14;13;13;13;13;13;14;14;14;14;14;14;14;14;14;13;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;13;14;14;13;13;14;14;14;13;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;15;15;15;15;15;15;15;15;15;15;15;15;15;15;15;15;15;15;15;15;15;15;15;15;15;15;15;15;15;16;16;16;16;16;16;17;16;16;17;17;17;17;17;17;17;17;17;17;17;17;17;17;17;17;17;17;17;17;17;17;17;17;17;17;17;17;17;17;17;17;18;17;17]';
tp=[16;16;16;16;29;17;17;17;17;17;15;15;15;16;16;16;16;16;16;16;15;16;15;16;16;16;15;16;16;16;16;16;18;23;16;15;16;15;18;16;17;19;18;16;17;15;15;16;19;19;20;21;21;26;15;21;23;14;15;15;15;15;16;16;15;15;15;15;15;15;15;15;15;15;15;15;24;24;22;14;21;21;26;14;21;28;29;27;14;27;26;26;26;26;26;25;25;24;25;21;21;20;22;24;23;21;21;21;18;16;17;20;21;20;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;14;13;14;13;14;13;13;21;20;16;18;17;13;13;14;15;25;24;25;28;29;29;14;20;16;14;14;20;19;19;14;13;16;19;21;23;22;22;22;22;22;21;20;19;17;16;16;15;15;14;14;14;14;14;13;14;13;13;13;14;13;13;12;14;14;13;13;13;13;23;20;20;27;14;21;22;14;17;13;13;13;13;13;19;18;13;13;13;13;13;14;14;14;14;19;16;14;15;16;14;14;14;12;12;12;16;16;16;16;15;16;16;16;16;12;12;12;16;16;16;16;16;16;16;16;16;16;16;13;13;13;13;13;13;13;16;14;16;14;18;14;16;17;14;13;13;13;16;20;21;13;16;17;16;15;14;14;17;17;14;13;15;15;16;16;13;13;13;13;13;18;20;14;22;13;14;13;13]';
er=[0;0;0;0;0;0;0;0;0;0;1305;1132;1112;1110;1107;1129;1134;1134;1107;1115;1115;1116;1123;1127;1124;1105;1122;1125;1115;1130;1122;1128;1602;1044;1370;1110;1207;1222;1213;1099;1121;1337;1249;1417;1825;1216;1101;1084;1087;1280;1082;1267;1425;1629;1892;1250;1278;1303;1275;1107;1064;1054;1058;1045;1071;1050;1035;1042;1023;1032;1018;1019;1018;1019;1010;994;1003;2133;1536;1968;1214;1248;1514;1876;1170;1435;1615;1831;2045;1549;1589;1663;1719;1782;1834;1888;1925;1970;2013;2046;1586;1579;1577;1570;1567;1573;1580;1580;1600;1613;1607;1588;1604;1626;1668;1661;1625;1587;1573;1570;1566;1557;1555;1563;1567;1563;1559;1515;1486;1474;1471;1474;1465;1468;1463;1376;1320;1307;904;856;841;829;1119;1342;1532;1171;1249;1247;1129;849;1072;1177;1308;1425;1557;1685;1815;1470;1469;1455;1398;1366;1363;1417;1375;1265;1269;1245;1281;1329;1378;1428;1475;1532;1573;1609;1632;1651;1642;1628;1607;1593;1584;1577;1543;1510;1478;1455;1421;1389;1212;1188;999;818;764;754;764;924;851;754;736;748;735;873;1339;2033;1428;1244;1646;2024;1035;1426;889;745;745;744;748;1406;1212;995;751;739;747;727;754;767;741;702;2162;973;1108;1212;1257;756;750;723;200;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;939;879;773;766;740;739;768;755;1414;884;1106;872;1338;1402;1034;1335;992;785;747;761;968;1450;1804;1023;1279;1338;1404;1439;1423;1371;1323;1421;1519;1126;1098;1111;1131;1162;1147;858;754;728;748;980;1394;1279;1211;1357;798;741;729]';
vs=[0;0;0;0;255;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;1;3;3;2;3;1;1;1;1;5;10;13;14;15;13;12;12;15;17;20;22;26;26;25;26;26;23;20;16;3;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;7;15;15;17;21;26;28;28;32;37;41;42;43;45;47;49;50;52;53;54;55;56;55;55;55;55;55;55;55;55;56;56;56;56;56;57;58;58;57;55;55;55;55;54;54;55;55;55;54;53;52;52;51;51;51;51;51;48;46;46;36;24;19;19;22;27;31;32;34;34;29;28;32;36;39;42;46;50;51;51;51;51;49;47;48;50;48;45;43;43;45;46;48;50;52;54;55;56;57;58;57;57;56;56;55;55;54;53;52;51;50;48;43;41;34;27;18;14;15;14;9;4;2;0;0;1;7;15;18;21;23;28;29;29;29;25;19;16;9;11;17;18;19;19;16;12;9;7;2;0;2;2;3;2;1;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;0;2;6;7;10;11;14;18;20;20;16;16;16;20;25;26;25;27;28;29;29;27;27;28;31;30;30;30;31;32;32;27;19;11;10;13;19;22;24;28;28;23;20]';
ct=[10;10;10;10;11;10;10;11;10;10;10;10;10;11;11;10;10;11;11;11;11;11;11;11;11;12;11;12;12;12;12;13;13;14;14;14;15;15;15;15;16;16;17;17;18;18;18;19;19;19;20;20;20;21;21;21;22;22;23;23;24;24;25;25;25;26;27;27;27;28;28;29;29;29;30;30;31;31;31;31;32;32;32;32;33;33;33;34;34;35;35;35;36;36;36;36;37;38;38;38;39;40;40;41;41;41;42;43;43;43;44;44;45;45;46;46;46;48;48;48;48;49;49;49;50;50;51;51;51;52;52;52;53;52;53;53;53;53;53;54;54;54;54;55;55;55;55;55;55;55;56;56;56;56;57;57;57;57;57;58;58;58;58;58;59;59;59;59;60;60;60;60;60;61;61;62;62;62;62;63;63;63;64;64;65;65;65;65;66;66;66;66;67;66;66;67;67;67;67;67;67;68;68;68;68;68;68;68;68;69;69;69;69;69;69;69;69;70;69;70;70;70;70;70;70;71;71;71;71;71;71;71;72;71;71;72;72;72;72;72;72;72;72;72;72;72;72;72;72;72;72;72;71;71;71;65;65;65;65;65;65;65;65;65;65;64;65;65;65;65;64;64;64;64;64;63;64;64;63;63;64;63;64;64;64;64;64;64;64;64;65;65;65;65;65;66;66;66;66;67;66;66;67;67;67;67;68;68;68;68;68;69]';
bn=length(ct);
t=1:bn;
%bavg=zeros(1,bn);
%bavg(:)=sum(b)/bn;
figure();
plot(t,ert);
hold on;
plot(t,iat);
hold on;
plot(t,tp);
hold on;
plot(t,er);
hold on;
plot(t,vs);
hold on;
plot(t,ct);
legend("Engine Runtime","Intake Air Temp","Throttle Position","Engine RPM","Vehicle Speed","Coolant Temp");
%axis([0 2000 -150 150]);
title("G21");
%axis([4 bn min(b)-50 max(b)+50]);
%xlabel('Packet Response Time (ms)');
%ylabel(sprintf('No. of packets '));
saveas(gcf,fullfile('Plots','G21.png'));